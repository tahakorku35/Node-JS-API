<!-- 
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Instagram Posts Viewer</title>
  <style>
    table {
      border-collapse: collapse;
      width: 100%;
    }

    th,
    td {
      border: 1px solid #dddddd;
      text-align: left;
      padding: 8px;
    }

    th {
      background-color: #f2f2f2;
    }

    img,
    video {
      width: 400px;
      height: 300px;
    }
  </style>
</head>

<body>

  <table id="instagramPostsTable">
    <thead>
      <tr>
        <th>Media</th>
        <th>Username</th>
        <th>Caption</th>
        <th>Timestamp</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const instagramPostsTableBody = document.querySelector("#instagramPostsTable tbody");

      function fetchInstagramPosts(url) {
        fetch(url)
          .then(response => response.json())
          .then(data => {
            console.log("Received data:", data);
            displayInstagramPosts(data);

            // Check for pagination
            if (data.paging && data.paging.next) {
              fetchInstagramPosts(data.paging.next);
            }
          })
          .catch(error => {
            console.error("Error fetching Instagram posts:", error);
          });
      }

      function formatTimestamp(timestamp) {
        console.log("Timestamp:", timestamp);
        const options = {
          year: 'numeric',
          month: '2-digit',
          day: '2-digit'
        };
        return new Date(timestamp).toLocaleDateString('en-US', options);
      }

      function displayInstagramPosts(posts) {
        const sortedPosts = posts.data.sort((a, b) => b.timestamp - a.timestamp);

        if (sortedPosts.length > 0) {
          sortedPosts.forEach(post => {
            const row = instagramPostsTableBody.insertRow();
            const mediaCell = row.insertCell(0);

            if (post.media_type === 'IMAGE') {
              mediaCell.innerHTML = `<a href="${post.media_url}" target="_blank"><img src="${post.media_url}" alt="Media"></a>`;
            } else if (post.media_type === 'VIDEO') {
              mediaCell.innerHTML = `<a href="${post.media_url}" target="_blank"><video controls><source src="${post.media_url}" type="video/mp4"></video></a>`;
            }

            row.insertCell(1).innerText = 'metayildiztr'; // Static username
            row.insertCell(2).innerText = post.caption ? post.caption : "No caption";
            row.insertCell(3).innerText = formatTimestamp(post.timestamp);
          });
        } else {
          instagramPostsTableBody.innerHTML = "<tr><td colspan='4'>No Instagram posts available.</td></tr>";
        }
      }

      // Initial request to fetch Instagram posts
      const initialUrl = "http://localhost:3000/getInstagram";
      fetchInstagramPosts(initialUrl);
    });
  </script>

</body>

</html> -->

node js kodu 


<!-- app.get('/getInstagram', (req, res) => {
  const accessToken = process.env.INSTAGRAM_API_ACCESS_TOKEN;

  const options = {
    method: 'GET',
    url: `https://graph.instagram.com/v12.0/me/media?fields=id,media_type,media_url,thumbnail_url,permalink,caption,timestamp&access_token=${accessToken}`,
  };

  request(options, (err, response, body) => {
    if (err) {
      console.error(err);
      res.status(500).send('Internal Server Error');
    } else {
      const data = JSON.parse(body);
      res.json(data);
    }
  });
}) -->